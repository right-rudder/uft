---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

const { content } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/*.{jpeg,jpg,png,gif,webp}"
);
if (!images[content.bannerSrc]) {
  throw new Error(
    `"${content.bannerSrc}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif,webp}"`
  );
}

---

<section class="relative">

  <div class="text-center mb-8">
    <p class="text-xl lg:text-3xl text-gray-100 leading-relaxed bg-accent-500 p-12 w-100">{content.intro}</p>
  </div>
  <Image
    src={images[content.bannerSrc]()}
    alt={content.bannerAlt}
    class="mx-auto"
  />

  <div class="m-4 lg:m-24">
    <div class="my-18">
      {content.courses.map((course) => (
        <div class="mb-8">
          <h2 class="text-2xl font-bold text-accent-500 mb-4">&emsp;{course.title}</h2>
          <p class="text-gray-700 leading-relaxed mb-4">{course.text}</p>
          {course.ul && (
            <>
              <p class="font-semibold text-gray-800">&emsp;{course.ul}</p>
              <ul class="list-disc pl-6 text-gray-700">
                {course.lis?.map((li) => (
                  <li class="mb-2 font-sans2">{li}</li>
                ))}
              </ul>
            </>
          )}
        </div>
      ))}
    </div>

    <div class="mb-12">
      <h2 class="text-2xl font-bold text-accent-500 mb-4">&emsp;{content.reasonsH}</h2>
      <ul class="list-disc pl-6 text-gray-700">
        {content.reasonsLi.map((reason) => (
          <li class="mb-2 font-sans2">{reason}</li>
        ))}
      </ul>
      <p class="mt-4 mx-7 text-gray-700" set:html={content.reasonsCTA}></p>
    </div>

    <!-- Button to Toggle Additional Information -->
    {content.additionalInfo?.length > 0 && (
      <>
        <button
          id="toggle-info-btn"
          class="bg-accent-500 text-white px-4 py-2 rounded shadow hover:bg-gray-100 hover:text-accent-500 transition"
        >
          Show More Information
        </button>

        <div id="additional-info" class="hidden mt-6">
          {content.additionalInfo.map((info) => (
            <div class="mb-6">
              <h3 class="text-xl font-semibold text-gray-800 mb-2">{info.h}</h3>
              <p class="text-gray-700">{info.p}</p>
            </div>
          ))}
        </div>
      </>
    )}
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggleBtn = document.getElementById("toggle-info-btn");
    const additionalInfo = document.getElementById("additional-info");

    if (toggleBtn && additionalInfo) {
      toggleBtn.addEventListener("click", () => {
        const isHidden = additionalInfo.classList.contains("hidden");

        if (isHidden) {
          additionalInfo.classList.remove("hidden");
          toggleBtn.textContent = "Show Less Information";
        } else {
          additionalInfo.classList.add("hidden");
          toggleBtn.textContent = "Show More Information";
        }
      });
    }
  });
</script>

